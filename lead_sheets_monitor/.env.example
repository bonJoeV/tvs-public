# Lead Sheets Monitor - Environment Configuration
# Copy this to .env and fill in your values

# ==================================================
# GOOGLE SHEETS API (Required)
# ==================================================
# Service account credentials as JSON (single line)
# Get from: Google Cloud Console -> APIs & Services -> Credentials
GOOGLE_CREDENTIALS_JSON={"type":"service_account","project_id":"...","private_key":"...","client_email":"..."}

# ==================================================
# FILE PATHS
# ==================================================
# Data files for tracking state
SENT_TRACKER_FILE=./sent_entries.json
FAILED_QUEUE_FILE=./failed_queue.json
CONFIG_FILE=./config.json
LOG_DIR=./logs

# ==================================================
# ENCRYPTION (Optional but recommended)
# ==================================================
# Encryption key file for sensitive data at rest
# The key will be auto-generated if not provided
# For Docker: mount to /secrets/.encryption_key
ENCRYPTION_KEY_FILE=./secrets/.encryption_key

# Or provide the key directly (base64-encoded Fernet key)
# Generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
# ENCRYPTION_KEY=<base64-encoded-key>

# ==================================================
# DASHBOARD AUTHENTICATION (Highly Recommended)
# ==================================================
# Without authentication, the dashboard is publicly accessible!
# Choose ONE of the following methods:

# Option 1: API Key (recommended for programmatic access)
# Generate a secure key: python -c "import secrets; print(secrets.token_urlsafe(32))"
DASHBOARD_API_KEY=your-secure-api-key-here

# Option 2: Basic Auth (for browser access)
# DASHBOARD_USERNAME=admin
# DASHBOARD_PASSWORD=your-secure-password-here

# ==================================================
# TRUSTED PROXY IPS
# ==================================================
# Comma-separated list of trusted proxy IPs/CIDR ranges
# Only trust X-Forwarded-For header from these sources
# Default: private IP ranges (suitable for most cloud load balancers)
TRUSTED_PROXY_IPS=127.0.0.1,10.0.0.0/8,172.16.0.0/12,192.168.0.0/16

# ==================================================
# EMAIL NOTIFICATIONS (Gmail SMTP)
# ==================================================
# Gmail app password (not your regular password)
# Get from: Google Account -> Security -> 2-Step Verification -> App passwords
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_FROM=your-email@gmail.com

# Admin email for error notifications
ADMIN_EMAIL=admin@example.com

# Tenant-specific email recipients (one per tenant)
TWINCITIES_EMAIL=tenant@example.com

# ==================================================
# SERVER CONFIGURATION
# ==================================================
# Health server port (required for Cloud Run)
HEALTH_PORT=8080

# Log level: DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=INFO

# Graceful shutdown timeout in seconds (Cloud Run sends SIGTERM)
GRACEFUL_SHUTDOWN_TIMEOUT=10

# ==================================================
# CLOUD RUN (Set automatically when deployed)
# ==================================================
# These are set by Cloud Run, shown here for reference:
# K_SERVICE=sheets-monitor
# K_REVISION=sheets-monitor-00001-abc
# PORT=8080

# ==================================================
# SECRETS DIRECTORY STRUCTURE
# ==================================================
# For production, create a ./secrets directory with:
#   ./secrets/.encryption_key    - Auto-generated encryption key
#   ./secrets/credentials.json   - Google service account credentials (optional, can use env var)
#
# Mount this directory as read-only in Docker:
#   - ./secrets:/secrets:ro
